# ARC2024

## システム構成図

### ロボット制御部

```
    +----------------+               +------------------+
    | PS4 Controller +<--bluetooth-->+ Raspi 3 model B+ |
    +----------------+               +--------+---------+
                                              ^
                                              |
                                           Ethernet
                                              |
                                              v
                                       +------+-------+
                                       | Arduino Mega |
                                       +------+-------+
```

### mjpg-streamer

```
    +-----------+           +------------------+         +------------+
    | Laptop PC +<--Wi-Fi-->+ Raspi 3 model B+ +<--USB-->+ Web Camera |
    +-----------+           +------------------+         +------------+
```

## ソフトウェア仕様

ARC2023 年度と大まかには同じなので重要な部分だけ抜粋

### 通信コマンド仕様

#### 案1

| No. | Command Name      | Details                                            |
|-----|-------------------|----------------------------------------------------|
|   1 | R_CAT_FORWARD     | 右のキャタピラーのモータを正回転の通電を開始する。 |
|   2 | R_CAT_BACKWARD    | 右のキャタピラーのモータを逆回転の通電を開始する。 |
|   3 | L_CAT_FORWARD     | 左のキャタピラーのモータを正回転の通電を開始する。 |
|   4 | L_CAT_BACKWARD    | 左のキャタピラーのモータを逆回転の通電を開始する。 |
|   5 | R_CAT_STOP        | 右のキャタピラーのモータを通電を停止する。 |
|   6 | L_CAT_STOP        | 左のキャタピラーのモータを通電を停止する。 |
|   7 | CAT_SLOW_MODE_ON  | キャタピラーのスローモードをオンにする。 |
|   8 | CAT_SLOW_MODE_OFF | キャタピラーのスローモードをオフにする。 |
|   9 | HEATER_ON         | ヒーターの通電をオンにする。 |
|  10 | HEATER_OFF        | ヒーターの通電をオフにする。 |
|  11 | ARM_HOLD          |  |
|  12 | ARM_UPPER         |  |
|  13 | ARM_LOWER         |  |
|  14 | EMERGENCY_STOP    |  |

#### 案2

| No. | Command Name   | Details                                |
|-----|----------------|----------------------------------------|
|   1 | R_CAT_MOVE     | 右キャタピラーのモータを制御する。     |
|   2 | L_CAT_MOVE     | 左キャタピラーのモータを制御する。     |
|   3 | CAT_SLOW_MODE  | キャタピラーのスローモードを制御する。 |
|   4 | HEATER_MODE    | ヒーターの通電を制御する。             |
|   5 | ARM_MOVE       | アームのモータを制御する。             |
|   6 | EMERGENCY_STOP | 緊急停止用。                           |

*Packet Format*

```
 0             15               31
+---------------+----------------+
|          Command No.           |
+---------------+----------------+
|            Option              |
+---------------+----------------+
```

* Command No. : 
* Option : コマンドのオプションを指定
  * R_CAT_MODE
    * -1 : 逆回転に通電
    *  0 : 停止
    *  1 : 正回転に通電
  * L_CAT_MODE
    * -1 : 逆回転に通電
    *  0 : 停止
    *  1 : 正回転に通電
  * CAT_SLOW_MODE
    *  1 : ON
    *  0 : OFF
  * HEATER_MODE
    *  1 : ON
    *  0 : OFF
  * ARM_MODE
    * -1 : 逆回転に通電
    *  0 : 停止
    *  1 : 正回転に通電
  * EMERGENCY_STOP
    * Option はなし。
